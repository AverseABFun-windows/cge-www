<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_using_sprites">Using sprites</a></li>
<li><a href="#_url_parameters_for_starling_and_cocos2d_formats">URL Parameters (for Starling and Cocos2d formats)</a></li>
<li><a href="#_notes_for_pixel_art_games">Notes for pixel-art games</a></li>
<li><a href="#_deprecated_approach">Deprecated approach</a></li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p><em>Sprite sheet</em> is a technique for rendering animations:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Each animation is a sequence of still images (aka "frames")</p>
</li>
<li>
<p>All the frames are packed into one big image (aka "texture atlas")</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It is a standard 2D animation technique for pixel-art games.</p>
</div>
<div class="paragraph">
<p>Note that it is not the only way to make 2D animations. In <em>Castle Game Engine</em> you can also create smooth 2D animations, using bones or even bones+skinning, by creating 2D animations in <a href="Spine" class="bare">Spine</a> or even <a href="https://castle-engine.io/creating_data_blender.php">Blender</a> or many other typically-3D authoring software. Creating sprite sheets has a different workflow and achieves a different result. For sprite sheet, you need to create a large set of still frames, which is sometimes easier / sometimes harder than creating an animation in Spine/Blender. Ultimately it results in an animation where you control every pixel of every frame.</p>
</div>
<div class="paragraph">
<p>Table of Contents:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#using-sprites">Using sprites</a></p>
</li>
<li>
<p><a href="#url-parameters-for-starling-and-cocos2d-formats">URL Parameters (for Starling and Cocos2d formats)</a></p>
</li>
<li>
<p><a href="#notes-for-pixel-art-games">Notes for pixel-art games</a></p>
</li>
<li>
<p><a href="#deprecated-approach">Deprecated approach</a></p>
</li>
</ul>
</div>
</div>
</div>
<h1 id="_using_sprites" class="sect0">Using sprites</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>The most advised way to use sprite sheets is to express them in a file:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In the <em>Castle Game Engine format</em> (<code>.castle-sprite-sheet</code> extension).</p>
</li>
<li>
<p>In the <em>Starling sprite sheet format</em> (traditionally with <code>.xml</code> extension, in CGE we require you rename them to <code>.starling-xml</code>).</p>
</li>
<li>
<p>or in the <em>Cocos2D sprite sheet format</em> (traditionally with <code>.plist</code> extension, in CGE we advise (but do not require yet) to use <code>.cocos2d-plist</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>We feature a dedicated <em>Sprite Sheet Editor</em> as part of <a href="https://castle-engine.io/manual_editor.php">our CGE editor</a>. Just right-click within the <em>"Files"</em> browser at the bottom and use <em>New Sprite Sheet</em> command, or double-click on an existing <code>.castle-sprite-sheet</code> file.</p>
</div>
<div class="paragraph">
<p>Our <code>.castle-sprite-sheet</code> is an extended version of the Starling XML format, adding features like FPS value that is saved inside <code>.castle-sprite-sheet</code> file, and can vary for each animation.</p>
</div>
<div class="paragraph">
<p>You can create sprite sheet animations in a number of ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>compose animations from a series of images,</p>
</li>
<li>
<p>import a ready image atlas,</p>
</li>
<li>
<p>import a ready sprite sheet in Starling XML format.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The sprite sheet file (regardless of the format):</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>points to a texture atlas (which can be any 2D image that <em>Castle Game Engine</em> can read, like PNG or JPG; see <a href="https://castle-engine.io/castle-view-image.php">castle-view-image</a> docs for the full list)</p>
</li>
<li>
<p>and describes frames within the file, and how they compose the final animation.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Once you have it, simply load it to <a href="https://castle-engine.io/apidoc-unstable/html/CastleScene.TCastleScene.html">TCastleScene</a>, using the <code>TCastleScene.Load</code> method (or by setting <code>TCastleScene.URL</code>), play animation by <code>TCastleScene.PlayAnimation</code> (or setting <code>TCastleScene.AutoAnimation</code> and <code>TCastleScene.AutoAnimationLoop</code>) and generally use all the <code>TCastleScene</code> API. See CGE manual about loading and playing scenes and animations: <a href="https://castle-engine.io/manual_load_3d.php">loading, displaying a scene</a>, <a href="https://castle-engine.io/manual_scene.php">transform, animate etc. a scene</a>.</p>
</div>
<div class="paragraph">
<p>This also allows you to load sprite sheets within the <a href="https://castle-engine.io/manual_editor.php">editor</a>. Simply create a <code>TCastleScene</code> inside <code>TCastleViewport</code> and assign it&#8217;s <code>URL</code>, <code>AutoAnimation</code> etc.</p>
</div>
</div>
</div>
<h1 id="_url_parameters_for_starling_and_cocos2d_formats" class="sect0">URL Parameters (for Starling and Cocos2d formats)</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>When you load a sprite sheet, you can use a special URL syntax to indicate additional parameters. Instead of loading just <code>my_sprite_sheet.starling-xml</code> you can use URLs like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>my_sprite_sheet.starling-xml#fps:10</pre>
</div>
</div>
<div class="paragraph">
<p>or</p>
</div>
<div class="listingblock">
<div class="content">
<pre>my_sprite_sheet.starling-xml#fps:10,anim-naming:strict-underscore</pre>
</div>
</div>
<div class="paragraph">
<p>The available parameters now are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>fps:&lt;float&gt;</code> (only for the <em>Starling</em> and <em>Cocos2d</em> formats)</p>
<div class="paragraph">
<p>Frames per second, determine the default animation speed. Note that you can later adjust the time at runtime using <a href="https://castle-engine.io/apidoc-unstable/html/CastleSceneCore.TCastleSceneCore.html#TimePlayingSpeed">TimePlayingSpeed</a>, just like with any <code>TCastleScene</code>.</p>
</div>
<div class="paragraph">
<p>By default we use 8 frames per second (see <a href="https://castle-engine.io/apidoc-unstable/html/CastleTextureImages.html#DefaultSpriteSheetFramesPerSecond">DefaultSpriteSheetFramesPerSecond</a>).</p>
</div>
<div class="paragraph">
<p>Note that this feature is not available for <code>.castle-sprite-sheet</code> files, as there the FPS is stored in the file (and can even be different for each animation). So there&#8217;s no point in specifying FPS by an URL.</p>
</div>
<div class="paragraph">
<p>Note that, regardless of the sprite sheet format, you can always scale time by adjusting <code>MyScene.TimePLayingSpeed</code>.</p>
</div>
</li>
<li>
<p><code>anim-naming:strict-underscore|trailing-number</code> (only for the <em>Starling</em> format)</p>
<div class="paragraph">
<p>Frames in Starling file can be named freely, and it is up to the loader to determine what constitutes an animation. Two values are possible:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>strict-underscore</code>: The default behavior, strict according to the Starling format specification. To recognize subsequent frames of the animation, the animation name and frame number must be separated by an underscore, like this: <code>walk_01</code>, <code>walk_02</code>.</p>
<div class="paragraph">
<p>Without the underscore they will be treated as separate animations. So e.g. frames <code>tree1</code>, <code>tree2</code> would result in 2 animations, each with a single frame. This sometimes make sense, and indeed it is used, when someone wants to employ sprite sheet as a simple way to access a texture atlas with still images.</p>
</div>
</li>
<li>
<p><code>trailing-number</code>: The consecutive animation frames do not need any character between animation name and the frame number. So e.g. <code>walk1</code> and <code>walk2</code> will work (resulting in animation name <code>walk</code>) just like <code>walk_1</code> and <code>walk_2</code> (underscore is optional, but still stripped, so it also results in animation name <code>walk</code>).</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Parameters are passed using an anchor separated by a comma, with a colon between the value and the next option name.</p>
</div>
</div>
</div>
<h1 id="_notes_for_pixel_art_games" class="sect0">Notes for pixel-art games</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>By default, textures have filtering applied, to make them look smooth when scaled.</p>
</div>
<div class="paragraph">
<p>If you want to have a pixel-art look, you can disable it easily, by</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Scene.RenderOptions.MinificationFilter := minNearest;
Scene.RenderOptions.MagnificationFilter := magNearest;</pre>
</div>
</div>
</div>
</div>
<h1 id="_deprecated_approach" class="sect0">Deprecated approach</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>You can also use <code>TSprite</code> class in CGE to load a sprite, in which case you will have to draw it explicitly. See <a href="2D Games" class="bare">2D Games</a>.</p>
</div>
<div class="paragraph">
<p>We do not advise this approach and it is deprecated now. Using sprite sheets inside <code>TCastleScene</code> is much more powerful, and also it allows to have simpler CGE API (since you just use <code>TCastleScene</code> for all animations, sprite sheet or not).</p>
</div>
</div>
</div>