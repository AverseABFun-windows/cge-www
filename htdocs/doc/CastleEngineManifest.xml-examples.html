<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel0">
<li><a href="#_simplest_example">Simplest example</a></li>
<li><a href="#_example_of_a_larger_manifest_file_portable_to_android_and_ios_too">Example of a larger manifest file (portable to Android and iOS too)</a></li>
<li><a href="#_specify_the_main_game_units_for_a_cross_platform_game">Specify the main game units for a cross-platform game</a></li>
<li><a href="#_editor_components">Editor components</a></li>
<li><a href="#_complete_documented_example">Complete documented example</a>
<ul class="sectlevel1">
<li><a href="#_basic_project_information">1. Basic project information</a></li>
<li><a href="#_data_directory">2. Data directory</a></li>
<li><a href="#_version">3. Version</a></li>
<li><a href="#_icons">4. Icons</a></li>
<li><a href="#_launch_images_for_now_only_for_ios">5. Launch images (for now only for iOS)</a></li>
<li><a href="#_android_information">6. Android information</a></li>
<li><a href="#_ios_information">7. iOS information</a></li>
<li><a href="#_file_type_associations_android_and_ios">8. File type associations (Android and iOS)</a></li>
<li><a href="#_dependencies">9. Dependencies</a></li>
<li><a href="#_packaging_exclude_and_include_files">10. Packaging (exclude and include files)</a></li>
<li><a href="#_compiler_options_and_paths">11. Compiler options and paths</a></li>
<li><a href="#_the_end">12. The end</a></li>
</ul>
</li>
</ul>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The <code>CastleEngineManifest.xml</code> file is used by the <a href="Build Tool">Build Tool</a> to know how to build and package your games (or any other projects using the <em>Castle Game Engine</em>). It should be present at the top-level directory of your project.</p>
</div>
<div class="paragraph">
<p>When you create a new project, you can generate a new manifest file by running <code>castle-engine create-manifest</code>. Or just manually create a new <code>CastleEngineManifest.xml</code> file, using the samples on this page. It&#8217;s a trivial XML file, just edit it using your favorite text editor.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#simplest-example">Simplest example</a></p>
</li>
<li>
<p><a href="#example-of-a-larger-manifest-file-portable-to-android-and-ios-too">Example of a larger manifest file (portable to Android and iOS too)</a></p>
</li>
<li>
<p><a href="#specify-the-main-game-units-for-a-cross-platform-game">Specify the main game units for a cross-platform game</a></p>
</li>
<li>
<p><a href="#editor-components">Editor components</a></p>
</li>
<li>
<p><a href="#complete-documented-example">Complete documented example</a></p>
<div class="ulist">
<ul>
<li>
<p><a href="#basic-project-information">Basic project information</a></p>
</li>
<li>
<p><a href="#data-directory">Data directory</a></p>
</li>
<li>
<p><a href="#version">Version</a></p>
</li>
<li>
<p><a href="#icons">Icons</a></p>
</li>
<li>
<p><a href="#launch-images-for-now-only-for-ios">Launch images (for now only for iOS)</a></p>
</li>
<li>
<p><a href="#android-information">Android information</a></p>
</li>
<li>
<p><a href="#ios-information">iOS information</a></p>
</li>
<li>
<p><a href="#file-type-associations-android-and-ios">File type associations (Android and iOS)</a></p>
</li>
<li>
<p><a href="#dependencies">Dependencies</a></p>
</li>
<li>
<p><a href="#packaging-exclude-and-include-files">Packaging (exclude and include files)</a></p>
</li>
<li>
<p><a href="#compiler-options-and-paths">Compiler options and paths</a></p>
</li>
<li>
<p><a href="#the-end">The end</a></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<h1 id="_simplest_example" class="sect0">Simplest example</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>This is the simplest example manifest:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="tag">&lt;project</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">my-cool-game</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">standalone_source</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">my_cool_game.lpr</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>standalone_source</code> value must point to an existing source file to compile the project for desktop platforms (Windows, Linux, MacOSX&#8230;&#8203;). An example is below. Alternatively, you can specify a list of <code>game_units</code> (see the documentation of <a href="#game_units-attribute">game_units attribute</a>), in which case the <code>standalone_source</code> is not necessary (the build tool can internally auto-generate a suitable program file for compilation).</p>
</div>
<div class="paragraph">
<p>When compiling, the resulting executable file name is derived from the project <code>name</code> (in this case: <code>my-cool-game</code>). So it&#8217;s <code>my-cool-game.exe</code> on Windows and just <code>my-cool-game</code> on Unix.</p>
</div>
<div class="paragraph">
<p>The project name is also used for other things:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>When packaging the project (by the <code>castle-engine package</code>), the archive names are derived from it. For example, packaging the project for Linux (64-bit architecture, x86_64) will result in <code>my-cool-game-linux-x86_64.tar.gz</code> filename.</p>
</li>
<li>
<p>In some cases we assume that the <code>ApplicationName</code> function (from the standard FPC <code>SysUtils</code> unit) returns the same project name at runtime. It&#8217;s never strictly necessary, but it is helpful e.g. for Android logging (where we need to filter the logs by project name). Therefore, it&#8217;s advised to assign in your source code the <code>OnGetApplicationName</code> callback, and make sure it returns the same thing as project name. See the example below, and the FPC documentation about <a href="http://www.freepascal.org/docs-html/rtl/sysutils/applicationname.html">ApplicationName</a> and <a href="http://www.freepascal.org/docs-html/rtl/sysutils/ongetapplicationname.html">OnGetApplicationName</a> .</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To be on the safe side, the build tool requires that the project name is limited to ASCII letters, numbers, underscores and hyphens. No spaces, no dots, no other special characters are allowed.</p>
</div>
<div class="paragraph">
<p>For example, place these contents in the <code>my_cool_game.lpr</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="pascal"><span class="keyword">uses</span> SysUtils, CastleWindow;

<span class="keyword">function</span> MyGetApplicationName: <span class="keyword">string</span>;
<span class="keyword">begin</span>
  Result := <span class="string"><span class="delimiter">'</span><span class="content">my-cool-game</span><span class="delimiter">'</span></span>;
<span class="keyword">end</span>;

<span class="keyword">var</span>
  Window: TCastleWindow;
<span class="keyword">begin</span>
  OnGetApplicationName := @MyGetApplicationName;
  Window := TCastleWindow.Create(Application);
  Window.OpenAndRun;
<span class="keyword">end</span>.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Congratulations, you have created a game! Now you can compile the project by running this on the command-line:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>castle-engine compile</pre>
</div>
</div>
<div class="paragraph">
<p>Then you can run it by simply executing the file <code>my-cool-game.exe</code> on Windows or <code>./my-cool-game</code> on Unix. Or you can run this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>castle-engine run</pre>
</div>
</div>
<div class="paragraph">
<p>You can also package the project by <code>castle-engine package</code>, package source by <code>castle-engine package-source</code> and do everything else mentioned in the <a href="Build Tool">Build Tool</a> documentation! To learn how to write games, follow our <a href="https://castle-engine.io/manual_intro.php">Castle Game Engine manual</a>.</p>
</div>
</div>
</div>
<h1 id="_example_of_a_larger_manifest_file_portable_to_android_and_ios_too" class="sect0">Example of a larger manifest file (portable to Android and iOS too)</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Sooner or later, you may want to add more information about your project. It is used when packaging your project in various formats. Note that everything has sensible default values anyway.</p>
</div>
<div class="paragraph">
<p>Example information that can be expressed in the manifest file:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>icon (various alternative formats possible),</p>
</li>
<li>
<p>version number (on some platforms, the version numbers are not only displayed; they are also used to signal possible upgrades to user; in particular, on Android platform, the version numeric "code" should always be increasing),</p>
</li>
<li>
<p>author,</p>
</li>
<li>
<p>screen orientation (for mobile devices; by default, all orientations are OK, and they can change at runtime),</p>
</li>
<li>
<p>additional Android and iOS services (to integrate 3rd party services into your game, like <em>Google Play Games</em> or <em>Apple Game Center</em>; see <a href="Android Project Services Integrated with Castle Game Engine">Android Project Services Integrated with Castle Game Engine</a> and <a href="iOS Services">iOS Services</a> for more information).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Below is a sample project manifest with more information:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="tag">&lt;project</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">my-cool-game</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">standalone_source</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">my_cool_game_standalone.lpr</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">game_units</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">MyGameMainUnit</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">My Cool Game</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">author</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">My Cool Game Company</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">qualified_name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.mycoolcompany.my.cool.game</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">screen_orientation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">landscape</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
  <span class="tag">&lt;version</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">code</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
  <span class="tag">&lt;icons&gt;</span>
    <span class="tag">&lt;icon</span> <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">icon.png</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
  <span class="tag">&lt;/icons&gt;</span>
  <span class="tag">&lt;android</span> <span class="attribute-name">project_type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">integrated</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
    <span class="tag">&lt;services&gt;</span>
      <span class="tag">&lt;service</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">vibrate</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/services&gt;</span>
  <span class="tag">&lt;/android&gt;</span>
<span class="tag">&lt;/project&gt;</span></code></pre>
</div>
</div>
</div>
</div>
<h1 id="_specify_the_main_game_units_for_a_cross_platform_game" class="sect0">Specify the main game units for a cross-platform game</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>To create a cross-platform game (that easily compiles to standalone, Android, iOS and other targets) you should use the <code>game_units</code> attribute in your manifest file. Like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="tag">&lt;project</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">my-cool-game</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">game_units</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">MainCoolGameUnit</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
<span class="tag">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The above example is a complete <code>CastleEngineManifest.xml</code> file, that allows to compile your game to any platform.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You can specify multiple unit names, separated by commas, like <code>game_units="OneUnit, TheOtherUnit"</code>. All the listed units will be automatically compiled into the game. But typically it is enough to specify a single <em>main unit</em>, and this unit can pull the other units by using them by a <code>uses SomeOtherUnit;</code> declaration in the Pascal source code.</p>
<div class="paragraph">
<p>The <code>initialization</code> section of one of your units must create an instance of the class <a href="https://castle-engine.io/apidoc-unstable/html/CastleWindow.TCastleWindowBase.html">TCastleWindowBase</a>, and you must set it as <a href="https://castle-engine.io/apidoc-unstable/html/CastleWindow.TCastleApplication.html#MainWindow">Application.MainWindow</a>. Any example code, in particular all new projects created by the <a href="https://castle-engine.io/manual_editor.php">CGE editor</a>, have a code doing this in <code>GameInitialize</code> unit.</p>
</div>
</li>
<li>
<p>The main program (or library) file, suitable for each platform, will be created automatically before every compilation, if you don&#8217;t set appropriate <code>xxx_source</code> attribute for your platform. So if you don&#8217;t set <code>android_source</code> / <code>ios_source</code> / <code>standalone_source</code> / <code>plugin_source</code>, but request compilation to a given platform, we will automatically generate a program (or library) file as necessary.</p>
<div class="paragraph">
<p><strong>This is an important attribute to use when making a game portable to both standalone and mobile</strong>. It allows you to avoid writing <em>any</em> Android or iOS specific code. And you don&#8217;t need to maintain the main program / library files. (These are the files typically with <code>.lpr</code> extension for FPC / Lazarus or <code>.dpr</code> for Delphi.)</p>
</div>
</li>
<li>
<p>NOTE: In order to use <a href="http://www.lazarus-ide.org/">Lazarus</a> or <a href="https://www.embarcadero.com/products/Delphi">Delphi</a> to develop and debug your application, it is often useful anyway to create the main program file for the standalone platform. You can even create and maintain it automatically using <code>castle-engine generate-program</code> command, see <a href="https://github.com/castle-engine/castle-engine/wiki/Build-Tool#generate-program">the documentation</a>.</p>
<div class="paragraph">
<p>In this case you should specify the generated <code>my_cool_game.lpr</code> file in the <code>standalone_source</code> attribute. The other platforms (Android, iOS) can still use an auto-generated library file.</p>
</div>
<div class="paragraph">
<p>The standalone program file can be customized to initialize a specific window size or fullscreen mode, to parse command-line options and so on. These are features not available on mobile devices.</p>
</div>
</li>
<li>
<p>NOTE: make sure that the compiler can find the units mentioned in game_units (just like every other unit necessary). For example, you can add these lines to add <code>code/</code> subdirectory to your unit search path:</p>
<div class="listingblock">
<div class="content">
<pre> &lt;compiler_options&gt;
   &lt;search_paths&gt;
     &lt;path value="code/" /&gt;
   &lt;/search_paths&gt;
 &lt;/compiler_options&gt;</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<h1 id="_editor_components" class="sect0">Editor components</h1>
<div class="openblock partintro">
<div class="content">
<div class="paragraph">
<p>Your game can define custom component classes useful with the <em>Castle Game Engine Editor</em>. These component classes heave to descend from <code>TCastleUserInterface</code> or <code>TCastleTransform</code>, and must be registered in the <code>initialization</code> section of some unit by calling <code>RegisterSerializableComponent(TMyButton, 'My Button');</code>.</p>
</div>
<div class="paragraph">
<p>You should list the units that contain these components in the <code>editor_units</code> attribute, which has a syntax similar to the <code>game_units</code> attribute: a number of units separated by commas.</p>
</div>
<div class="paragraph">
<p>When you call the build tool with <code>castle-engine editor</code> command, it will automatically build and run a special version of the CGE editor with your <code>editor_units</code> included. This way you get special editor version that includes your project-specific components.</p>
</div>
</div>
</div>
<h1 id="_complete_documented_example" class="sect0">Complete documented example</h1>
<div class="openblock partintro">
<div class="content">
This section documents the complete manifest file, with every possible attribute documented.
</div>
</div>
<div class="sect1">
<h2 id="_basic_project_information">1. Basic project information</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml"><span class="preprocessor">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="tag">&lt;project</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">my_game</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">caption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">My Game Title</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">author</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">My Name</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">qualified_name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.domain.my.my_game</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">executable_name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">my_game</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">standalone_source</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">code/my_game.lpr</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">android_source</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">code/my_game_android.lpr</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">ios_source</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">code/my_game_ios.lpr</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">plugin_source</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">code/my_game_plugin.lpr</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">game_units</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">MyMainGameUnit, MyOtherGameUnit</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">editor_units</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">MyVisualComponents</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">screen_orientation</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">any</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">fullscreen_immersive</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">lazarus_project</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">my_game.lpi</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">delphi_project</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">my_game.dproj</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">build_using_lazbuild</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span>
  <span class="attribute-name">compiler</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">autodetect</span><span class="delimiter">&quot;</span></span>
<span class="tag">&gt;</span>
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>&lt;project&gt;</code> attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>name</code>: Required name of your game. It determines the names of various output files/packages of your game. It should not contain spaces or non-ASCII characters. It&#8217;s best to also specify it as OnGetApplicationName inside your code.</p>
</li>
<li>
<p><code>caption</code>: User-visible game title. Optional (by default equal to <code>name</code>). Here you can use spaces, any special characters and so on.</p>
</li>
<li>
<p><code>author</code>: Author and/or company name. Optional. Used where suitable in the metadata information in the final package or binary.</p>
</li>
<li>
<p><code>qualified_name</code>: Unique identifier of your game for some purposes (e.g. used by various Android stores, iOS AppStore, Windows manifest). It is optional (by default equal to <code>name</code> limited to alphanumeric characters and a dot).
A convention is to derive this from the website address of your project. For example, for a game hosted on <a href="https://example.org/tetris" class="bare">https://example.org/tetris</a> , a sensible qualified name would be "org.example.tetris". But this is just a convention (no automatic mechanism will actually check is the portion of the name an existing domain name on the Internet), the only important fact is to make this string really unique.</p>
</li>
<li>
<p><code>executable_name</code>: Binary name (without platform-specific extension, like <code>.exe</code> on Windows). Optional, by default equal to just <code>name</code>.</p>
</li>
<li>
<p><code>standalone_source</code>: Main file for standalone (desktop&#8201;&#8212;&#8201;Windows, Linux, MacOSX&#8230;&#8203;) targets. Optional. You need to provide this, or the <code>game_units</code>, to compile for standalone platforms.</p>
</li>
<li>
<p><em>(Deprecated)</em> <code>android_source</code>, <code>ios_source</code>, <code>plugin_source</code>: Main file for a specified target. Optional. Using these attributes is discouraged: it&#8217;s much better to specify only <code>game_units</code>, and let the engine auto-generate the appropriate main file for you. You need to understand a little the engine internals to create a valid <code>xxx_source</code> for Android, iOS or web plugin.</p>
</li>
<li>
<p><code>screen_orientation</code>: Desired screen orientation on devices that support it, e.g. on Android. Allowed values are <code>any</code> (default), <code>landscape</code>, <code>portrait</code>.</p>
</li>
<li>
<p><code>fullscreen_immersive `: Indicates whether you want to have the status bar and navigation buttons hidden on Android and iOS . Allowed values are `true</code> (default), <code>false</code>.</p>
</li>
<li>
<p><code>game_units</code>: List of game units. To be included in the auto-generated library or program of your application. See the section above for more information.</p>
</li>
<li>
<p><code>editor_units</code>: List of the units that register custom components useful in CGE editor. See the section above for more information.</p>
</li>
<li>
<p><code>lazarus_project</code>: The Lazarus project (<code>.lpi</code> extension) file of this project. It will be used to open this project in Lazarus. It will also be used to compile it, if <code>build_using_lazbuild</code>. By default this is calculated as <code>standalone_source</code> with extension changed to <code>.lpi</code>.</p>
</li>
<li>
<p><code>build_using_lazbuild</code>:</p>
<div class="ulist">
<ul>
<li>
<p>If this is <code>false</code> (default) then we use plain FPC to compile, passing command-line parameters to find the CGE unis and other options listed in <code>compiler_options</code>.</p>
</li>
<li>
<p>If <code>true</code> then we will compile using <a href="https://wiki.lazarus.freepascal.org/lazbuild">lazbuild</a> through the LPI file defined by <code>lazarus_project</code>. This is useful if your project uses Lazarus LCL, or other package distributed as Lazarus LPK file. Thanks to <code>lazbuild</code> and LPI file, these packages will be automatically correctly used. On the other hand, some other features of the build tool do not work (instead we rely that you configured the project in Lazarus correctly):</p>
<div class="ulist">
<ul>
<li>
<p>We do not construct the FPC command-line anymore, so we ignore custom <code>compiler_options</code>.</p>
</li>
<li>
<p>We don&#8217;t pass location of CGE units to lazbuild (Lazarus projects should use <code>castle_base</code> and <code>castle_window</code> / <code>castle_components</code> packages).</p>
</li>
<li>
<p>We don&#8217;t pass any compilation syntax options, but this usually doesn&#8217;t matter (because our <code>castle_xxx</code> packages are compiled with proper options, and for your own projects&#8201;&#8212;&#8201;the Lazarus defaults are largely similar to CGE defaults, e.g. using ObjFpc mode with AnsiStrings).</p>
</li>
<li>
<p>We do not pass <code>--mode</code> (Lazarus supports build modes, but not all projects define Debug/Release modes).</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><code>delphi_project</code> points to the <code>xxx.dproj</code> file of the project. By default this is calculated as <code>standalone_source</code> with extension changed to <code>.dprof</code>.</p>
</li>
<li>
<p><code>compiler</code> changes the default compiler used to compile this project (note that command-line <code>--compiler=xxx</code> option of the build tool can override it):</p>
<div class="ulist">
<ul>
<li>
<p><code>autodetect</code> (default) - use FPC or Delphi, whichever first is found</p>
</li>
<li>
<p><code>fpc</code></p>
</li>
<li>
<p><code>delphi</code></p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_data_directory">2. Data directory</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default, we expect a subdirectory named <code>data</code> inside the project directory. This is the only "special" directory name for <em>Castle Game Engine</em> projects, it will be specially packaged, and <a href="https://castle-engine.io/manual_data_directory.php">your application can read from it on any platform using URL like 'castle-data:/xxx.png'</a>.</p>
</div>
<div class="paragraph">
<p>If you don&#8217;t have any data files in your project, you can say it explicitly to avoid some warnings from the build tool:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">...
  <span class="tag">&lt;data</span> <span class="attribute-name">exists</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">false</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
...</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_version">3. Version</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">...
  <span class="tag">&lt;version</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1.0.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">code</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>&lt;version&gt;</code> element declares program version. It is used when packaging for some formats (Android package, Windows executable information, iOS project). Attributes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>value</code>: User-visible version name. Any string representing your version. We advise (but do not strictly require) to use the <em>major.minor.release</em> format for version numbers, with all components being simple integer numbers.</p>
</li>
<li>
<p><code>code</code>: Optional (by default 1) version number. This must be an integer number &gt;= 0, specifying the version as a simple number that <em>always grows</em>. This may be used by some platforms (like Android) to compare your applications versions to decide when to automatically upgrade.</p>
<div class="paragraph">
<p>Note that some platforms (notably Google Play) require that this version number starts from 1 (never 0).</p>
</div>
<div class="paragraph">
<p>On the other hand, on some platforms (like <a href="Nintendo Switch" class="bare">Nintendo Switch</a>) this number sometimes must be 0.</p>
</div>
<div class="paragraph">
<p>We allow to override this number per-platform using <code>&lt;override_version&gt;</code> elements mentioned below. So the global <code>&lt;version.../&gt;</code> element is just the default version, which may be adjusted per-platform later.</p>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_icons">4. Icons</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">...
  <span class="tag">&lt;icons&gt;</span>
    <span class="tag">&lt;icon</span> <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">icon.svg</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;icon</span> <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">icon.png</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;icon</span> <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">icon.ico</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
  <span class="tag">&lt;/icons&gt;</span>
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can provide an optional icon of your application, in various formats, by listing them inside <code>&lt;icons&gt;</code> element. Each platform will use the most suitable icon format and size.</p>
</div>
<div class="paragraph">
<p>For now, Windows will use the .ico version, and Android and iOS will use any version readable by our engine (like .png or .jpg). We take care to use the best icon format in the best possible way, resizing it (with good quality algorithm) if necessary.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_launch_images_for_now_only_for_ios">5. Launch images (for now only for iOS)</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">...
  <span class="tag">&lt;launch_images&gt;</span>
    <span class="tag">&lt;image</span> <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">launch-image-640x1136.png</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span> <span class="comment">&lt;!-- Will be used on iPhone (Portrait) --&gt;</span>
    <span class="tag">&lt;image</span> <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">launch-image-1536x2048.png</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span> <span class="comment">&lt;!-- Will be used on iPad (Portrait) --&gt;</span>
    <span class="tag">&lt;image</span> <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">launch-image-2048x1536.png</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span> <span class="comment">&lt;!-- Will be used on iPad (Landscape) --&gt;</span>
    <span class="tag">&lt;storyboard</span>
      <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">launch-image.png</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">scale</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1.0</span><span class="delimiter">&quot;</span></span>
      <span class="attribute-name">background_color</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">000000</span><span class="delimiter">&quot;</span></span>
    <span class="tag">/&gt;</span> <span class="comment">&lt;!-- If set, the &quot;storyboard&quot; will be used on all devices since iOS 8, in all orientations --&gt;</span>
  <span class="tag">&lt;/launch_images&gt;</span>
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>iOS shows a <em>launch image</em> when the application starts. Launch image is shown very early, before any CGE code can run and render anything. So it is displayed even before <a href="https://castle-engine.io/manual_2d_user_interface.php#section_loading_image">CGE loading image</a> shows. The point of the launch image is to communicate to the user that the application is, well, launching.</p>
</div>
<div class="paragraph">
<p>To enable you to customize this, we will use the images defined as <code>&lt;launch_images&gt;</code>.</p>
</div>
<div class="paragraph">
<p>There are 2 ways to customize it (and you can use both):</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Provide a set of <code>&lt;image&gt;</code> elements inside <code>&lt;launch_images&gt;</code>. This works on all iOS devices.</p>
<div class="paragraph">
<p>This approach requires a couple of image sizes, with various aspect ratios, to cover all possibilities. We will scan the list of your <code>&lt;launch_images&gt;</code> and choose the one with closest aspect ratio (<em>width / height</em> proportion), and use it (eventually resizing if needed). Only if you don&#8217;t define any <code>&lt;launch_images&gt;</code>, we will use a default one. The suggested sizes, and their usage, is shown in the example above.</p>
</div>
<div class="paragraph">
<p>Note that there&#8217;s no <em>iPhone Landscape</em> launch image. For some reason, Apple doesn&#8217;t want it, and in landscape iPhone applications it will show the launch image in portrait orientation. To overcome this, you need to use the <code>&lt;storyboard&gt;</code> described below.</p>
</div>
</li>
<li>
<p>Provide a single <code>&lt;storyboard&gt;</code> element inside <code>&lt;launch_images&gt;</code>. This works on iOS 8 and newer devices.</p>
<div class="paragraph">
<p>This approach requires you to provide just one launch image, that will be centered on the background of solid color.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>path</code> is the filename inside CGE project of the launch image. Must be PNG. It doesn&#8217;t need to be in <code>data</code> subdirectory, it can be anywhere in the project (we will copy it anyway to proper Xcode project place). The image can use partial transparency (alpha channel), in which case <code>background_color</code> will be visible underneath.</p>
</li>
<li>
<p><code>scale</code> (default 1.0) determines the scale of the image. This is relative to the default set in CGE, which is to fit the image within 256x256 frame, and allow Xcode storyboard algorithm to scale it to adjust to various devices. The Xcode scaling algorithm <em>does not</em> match CGE UI scaling algorithm. In practice, you just have to experiment if you want a particular size.</p>
</li>
<li>
<p><code>background_color</code> (default black, i.e. <code>000000</code>) is the background color visible around and (if image uses transparency) under the image. This is in hexadecimal notation (as accepted by <code>HexToColor</code> CGE function), e.g. use <code>FFFFFF</code> for white, use <code>FF0000</code> for pure red). You can use pretty much any graphic application to pick a color and copy its value in hexadecimal form (6 or 8 hex digits).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Notes for testing: iOS really aggressively caches these launch images. If you change the <code>launch_image.png</code>, but the application seems to stubbornly show the same old version (even after you&#8217;re sure you installed the updated version!), then you may need to use an ugly workaround: uinstall the app <em>and</em> reboot the iOS device before installing the app again. This will show new launch image. Note that doing only one of these things (only reboot, or only uninstall + reinstall) is not enough. See <a href="https://github.com/expo/expo/issues/1918" class="bare">https://github.com/expo/expo/issues/1918</a> , <a href="https://github.com/facebook/react-native/issues/28389" class="bare">https://github.com/facebook/react-native/issues/28389</a> .</p>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_android_information">6. Android information</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">...
  <span class="tag">&lt;android</span>
    <span class="attribute-name">project_type</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">integrated</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">compile_sdk_version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">27</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">min_sdk_version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">16</span><span class="delimiter">&quot;</span></span>
    <span class="attribute-name">target_sdk_version</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">27</span><span class="delimiter">&quot;</span></span>
  <span class="tag">&gt;</span>
    <span class="tag">&lt;services&gt;</span>
      <span class="tag">&lt;service</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">google_play_services</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
      <span class="tag">&lt;service</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">google_play_games</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
        <span class="tag">&lt;parameter</span> <span class="attribute-name">key</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">app_id</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">XXXX</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
      <span class="tag">&lt;/service&gt;</span>
    <span class="tag">&lt;/services&gt;</span>
  <span class="tag">&lt;/android&gt;</span>
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>&lt;android&gt;</code> element provides various extra Android-specific information.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>See <a href="Android-Project-Services-Integrated-with-Castle-Game-Engine">Android services</a> for a description of <code>project_type</code>, and what <em>services</em> are available inside the <code>&lt;services&gt;</code> element.</p>
</li>
<li>
<p><code>compile_sdk_version</code>: The Android SDK <em>platform version</em> used to compile the project. You must have this version installed in the Android SDK. For example, if this is 27 (the current default), then you must install the <em>"SDK Platform"</em> and <em>"Google APIs"</em> components of the <em>"Android 6.0 (API 27)"</em> section in your Android SDK. Note that this does <em>not</em> determine the minimum (or maximum) Android version your application supports. It is optional, the default value is shown above.</p>
</li>
<li>
<p><code>min_sdk_version</code>: The minimum supported Android version. It is a hard limit on where the application is installable, it also limits for which devices it appears in the Google Play store. See the <a href="Android-FAQ#what-android-devices-are-supported">Android FAQ: What Android devices are supported?</a> for a reason behind the current value.</p>
</li>
<li>
<p><code>target_sdk_version</code>: Which Android version of Android Java APIs you can use. Don&#8217;t worry about it, unless you use a specific <a href="Android-Project-Services-Integrated-with-Castle-Game-Engine">Android service</a> that requires increasing this version.</p>
<div class="paragraph">
<p>Note that with FPC versions earlier than 3.0.2, you cannot increase <code>target_sdk_version</code> above 22. That&#8217;s due to missing PIC support. See <a href="http://lists.freepascal.org/pipermail/fpc-devel/2015-September/035948.html" class="bare">http://lists.freepascal.org/pipermail/fpc-devel/2015-September/035948.html</a> and <a href="http://fpc-devel.freepascal.narkive.com/tMJHK2Hw/fpc-app-crash-with-has-text-relocations-android-6-0" class="bare">http://fpc-devel.freepascal.narkive.com/tMJHK2Hw/fpc-app-crash-with-has-text-relocations-android-6-0</a> . Compiling with -fPIC doesn&#8217;t help, your app will crash then with <code>java.lang.IllegalArgumentException: Unable to load native library:...</code></p>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_ios_information">7. iOS information</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">...
  <span class="tag">&lt;ios</span>
     <span class="attribute-name">team</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">...</span><span class="delimiter">&quot;</span></span>
     <span class="attribute-name">override_qualified_name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">org.example.ios.qualified.name</span><span class="delimiter">&quot;</span></span>
     <span class="attribute-name">uses_non_exempt_encryption</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">true|false</span><span class="delimiter">&quot;</span></span>
  <span class="tag">&gt;</span>
    <span class="tag">&lt;override_version</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1.0</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">code</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">1</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;services&gt;</span>
      <span class="tag">&lt;service</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">apple_game_center</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/services&gt;</span>
  <span class="tag">&lt;/ios&gt;</span>

...</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>&lt;ios&gt;</code> element provides various extra iOS-specific information.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>team</code> is the identifier of your Apple team, used to sign the application. See <a href="https://stackoverflow.com/questions/18727894/how-can-i-find-my-apple-developer-team-id-and-team-agent-apple-id">how to find my Apple Developer Id</a>. You can also set the <em>Development Team</em> using the XCode GUI before compiling the project.</p>
</li>
<li>
<p><code>override_qualified_name</code> overrides the qualified name (by default taken from <code>qualified_name</code>) for iOS. This allows you to use different qualified names for Android and iOS applications, in case you need it.</p>
</li>
<li>
<p><code>&lt;override_version&gt;</code>, if specified, overrides the main <code>&lt;version&gt;</code> only for iOS. This allows you to use different version name for iOS release than the other platforms (Android, desktop etc.), in case you need it. On iOS,</p>
<div class="ulist">
<ul>
<li>
<p>the version display value (<code>value</code> within <code>&lt;version&gt;</code> or <code>&lt;override_version&gt;</code>) must match the version set in <em>iTunes Connect</em> website (where you release iOS applications).</p>
</li>
<li>
<p>the numeric version code (<code>code</code> within <code>&lt;version&gt;</code> or <code>&lt;override_version&gt;</code>) isn&#8217;t used for now.</p>
</li>
</ul>
</div>
</li>
<li>
<p><code>uses_non_exempt_encryption</code> says whether your application uses an encryption that requires you to do some legal things when it is distributed from U.S. This is important for distributing your application internationally from the Apple AppStore, which qualifies as <em>exporting your application from U.S.</em>.</p>
<div class="paragraph">
<p>By default this is <code>true</code>, which is consistent with the default of the Apple <em>iTunes Connect</em> setting. If your application does not use encryption at all (unlikely, in modern times, as even reading stuff through HTTPS qualifies as <em>"using encryption"</em>), or if you fall under some exemptions (e.g. you only use HTTPS), then you can set this to <code>false</code>. This way Apple <em>iTunes Connect</em> will no longer bother you about this.</p>
</div>
<div class="paragraph">
<p><a href="https://itunespartner.apple.com/en/apps/faq/Managing%20Your%20Apps_Export%20Compliance">Please read the Apple documentation on this issue</a>. Setting this to <code>false</code> is equivalent to using <code>&lt;key&gt;ITSAppUsesNonExemptEncryption&lt;/key&gt;&lt;false/&gt;</code> in the <code>xxx-Info.plist</code> file in your XCode project.</p>
</div>
</li>
<li>
<p>See the <a href="iOS Services">iOS Services</a> for information what can you use within the <code>&lt;services&gt;</code> element.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_file_type_associations_android_and_ios">8. File type associations (Android and iOS)</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">...
  <span class="tag">&lt;associate_document_types&gt;</span>
    <span class="tag">&lt;document_type</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">VRML Scene</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">icon</span>=<span class="string"><span class="delimiter">&quot;</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;file_extension</span> <span class="attribute-name">extension</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">wrl</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">mime</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">model/vrml</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
      <span class="tag">&lt;file_extension</span> <span class="attribute-name">extension</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">wrz</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">mime</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">model/vrml</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/document_type&gt;</span>
    <span class="tag">&lt;document_type</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">ZIP Archive</span><span class="delimiter">&quot;</span></span><span class="tag">&gt;</span>
      <span class="tag">&lt;file_extension</span> <span class="attribute-name">extension</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">zip</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">mime</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">application/zip</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">ios_type_identifier</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">com.pkware.zip-archive</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;/document_type&gt;</span>
    ...
  <span class="tag">&lt;/associate_document_types&gt;</span>

...</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>&lt;associate_document_types&gt;</code> element allows to tell the operating system to associate the given document types to your application. Each document type can specify several file extensions.</p>
</div>
<div class="paragraph">
<p>The <code>&lt;document_type&gt;</code> element defines the document type to associate.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>name</code>: string visible to the user on iOS when user taps the file with this type.</p>
</li>
<li>
<p><code>icon</code>: icon file shown next to the <code>name</code>. When none supplied, the application icon will be used.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The <code>&lt;file_extension&gt;</code> element specifies the actual file extension to match.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>extension</code>: file extension string without leading dot.</p>
</li>
<li>
<p><code>mime</code>: mime type used on iOS.</p>
</li>
<li>
<p><code>ios_type_identifier</code>: In case you are associating the well known document type on iOS, you have to set this attribute to one of the system-declared uniform type identifiers, see <a href="https://developer.apple.com/library/content/documentation/Miscellaneous/Reference/UTIRef/Articles/System-DeclaredUniformTypeIdentifiers.html#//apple_ref/doc/uid/TP40009259-SW1">Apple documentation</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To make URL opening work on Android, you need to set <code>&lt;android project_type="integrated"&gt;</code> in the manifest, see <a href="#android-information">Android information</a>.</p>
</div>
<div class="paragraph">
<p>To handle the actual URL to be opened, you have to implement <code>Window.OnDropFiles</code> event in your source code.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dependencies">9. Dependencies</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">...
  <span class="tag">&lt;dependencies&gt;</span>
    <span class="comment">&lt;!-- read font files like .ttf --&gt;</span>
    <span class="tag">&lt;dependency</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Freetype</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="comment">&lt;!-- read .gz files --&gt;</span>
    <span class="tag">&lt;dependency</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Zlib</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="comment">&lt;!-- read .png files --&gt;</span>
    <span class="tag">&lt;dependency</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Png</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="comment">&lt;!-- play sound --&gt;</span>
    <span class="tag">&lt;dependency</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Sound</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="comment">&lt;!-- read .ogg (OggVorbis) compressed audio files --&gt;</span>
    <span class="tag">&lt;dependency</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">OggVorbis</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="comment">&lt;!-- ability to download using https (not only http) --&gt;</span>
    <span class="tag">&lt;dependency</span> <span class="attribute-name">name</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">Https</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
  <span class="tag">&lt;/dependencies&gt;</span>
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>&lt;dependencies&gt;</code> element allows to explicitly declare dependencies on various libraries. These dependencies are applied on all platforms. On some platforms (for now: Windows, Android, iOS) the necessary libraries are automatically bundled with your binary when packaging.</p>
</div>
<div class="paragraph">
<p>(Note for Android: It is necessary to use <code>project_type="integrated"</code> to have some of the dependencies applied&#8201;&#8212;&#8201;like <code>Sound</code> and <code>OggVorbis</code>.)</p>
</div>
<div class="paragraph">
<p>Note that it&#8217;s often not necessary to specify these dependencies. The build tool automatically adds the dependencies when it detects a particular file format in your game <code>data</code>. For example, if you have a file <code>music.ogg</code>, we will automatically add the <code>OggVorbis</code> and <code>Sound</code> dependencies.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_packaging_exclude_and_include_files">10. Packaging (exclude and include files)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An example usage:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">...
  <span class="tag">&lt;package&gt;</span>
    <span class="tag">&lt;include</span> <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">documentation/*</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">recursive</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">True</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;include</span> <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">README.txt</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;include</span> <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">COPYING.GPL2.txt</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;exclude</span> <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">*.xcf</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;exclude</span> <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">data/internal/*</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
  <span class="tag">&lt;/package&gt;</span>
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>&lt;package&gt;</code> element allows to fine-tune what files to include in the <em>package</em>. Package is created using the <code>castle-engine package</code> command of the build tool.</p>
</div>
<div class="paragraph">
<p>By default, the build tool includes the <code>data/</code> subdirectory, the executable file and (on Windows) necessary DLLs. And it excludes some files known to be useful only for development, like <code><strong>.xcf</code> (GIMP), <code></strong>.blend*</code> (Blender), <code>*~</code> (backup files from various applications). To be precise, the defaults are like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">...
  <span class="tag">&lt;package&gt;</span>
    <span class="tag">&lt;include</span> <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">my_executable[.exe]</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">executable_permission</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">True</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;include</span> <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">some_necessary_library.dll</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;include</span> <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">data/*</span><span class="delimiter">&quot;</span></span> <span class="attribute-name">recursive</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">True</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>

    <span class="tag">&lt;exclude</span> <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">*.xcf</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;exclude</span> <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">*.blend*</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;exclude</span> <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">*~</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;exclude</span> <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">*/.DS_Store</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
    <span class="tag">&lt;exclude</span> <span class="attribute-name">path</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">*/thumbs.db</span><span class="delimiter">&quot;</span></span> <span class="tag">/&gt;</span>
  <span class="tag">&lt;/package&gt;</span>
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>&lt;package&gt;</code> element allows to list additional files/directories to include or exclude.</p>
</div>
<div class="paragraph">
<p>The important fact to understand <em>how the inclusion/exclusion masks work</em> is that the paths (specified in the <code>path</code> attribute) are matched against the relative <em>path</em> (like <code>data/my_subdirectory/my_image.png</code>) of every existing file in the project.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;include&gt;</code>: Add given files to the package. The <code>path</code> is actually split (by last <code>/</code>) into a subdirectory (relative to the project directory) and the mask within it (with wildcards * and ?). We include the files matching the mask within the given subdirectory, possibly recursive (if <code>recursive="True"</code>).</p>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;include path="gfx/textures/<strong>.psd" recursive="True" /&gt;</code> adds files matching <code></strong>.psd</code> that are found inside the subdirectory <code>gfx/textures/</code> (or any of it&#8217;s subdirectories).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can request to set Unix executable bit (like <code>chmod +x ...</code>) on the packaged file using <code>&lt;include ... executable_permission="true" /&gt;</code> (default <code>false</code>). The executable bit will be set, or unset, regardless of the executable bit of the original file.</p>
</div>
</li>
<li>
<p><code>&lt;exclude&gt;</code>: Exclude files whose whole path (relative to project directory) matches given mask. You can use wildcards * and ?, where * matches any number of any characters, including slash (directory separator).</p>
<div class="paragraph">
<p>For example:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>&lt;exclude path="*.xcf" /&gt;</code> to exclude all GIMP xcf files.</p>
</li>
<li>
<p>Use <code>&lt;exclude path="data/internal/*" /&gt;</code> to exclude all files inside data/internal/ subdirectory.</p>
</li>
<li>
<p>Use <code>&lt;exclude path="data/internal/*.xcf" /&gt;</code> to exclude all GIMP files inside data/internal/ subdirectory.</p>
</li>
<li>
<p>Use <code>&lt;exclude path=".gitignore" /&gt;</code> to exclude file named <code>.gitignore</code> but only <em>at the project top-level directory</em>.</p>
</li>
<li>
<p>Use <code>&lt;exclude path="*/.gitignore" /&gt;</code> to exclude file named <code>.gitignore</code> <em>at any place within the project, not only at the project top-level directory</em>.</p>
</li>
<li>
<p>Use <code>&lt;exclude path=".svn/*" /&gt;</code> to exclude <code>.svn</code> subdirectory but only <em>at the project top-level directory</em>.</p>
</li>
<li>
<p>Use <code>&lt;exclude path="<strong>/.svn/</strong>" /&gt;</code> to exclude <code>.svn</code> subdirectory <em>at any place within the project, not only at the project top-level directory</em>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>The order of including and excluding:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>first we include all included files,</p>
</li>
<li>
<p>then we remove excluded stuff.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The inclusion and exclusion compare <em>paths</em> of <em>files</em>. The directories themselves are not considered for inclusion or exclusion. Empty directories (with no included files) are simply not packed.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_compiler_options_and_paths">11. Compiler options and paths</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">...
  <span class="tag">&lt;compiler_options&gt;</span>
    <span class="tag">&lt;search_paths&gt;</span>
      <span class="tag">&lt;path</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">code/subdirectory/</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
      <span class="tag">&lt;path</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">code/another_subdirectory/</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;/search_paths&gt;</span>
    <span class="tag">&lt;custom_options&gt;</span>
      <span class="tag">&lt;option&gt;</span>-dMY_CUSTOM_SYMBOL<span class="tag">&lt;/option&gt;</span>
    <span class="tag">&lt;/custom_options&gt;</span>
    <span class="tag">&lt;library_paths&gt;</span>
      <span class="tag">&lt;path</span> <span class="attribute-name">value</span>=<span class="string"><span class="delimiter">&quot;</span><span class="content">static_libraries/</span><span class="delimiter">&quot;</span></span><span class="tag">/&gt;</span>
    <span class="tag">&lt;library_paths&gt;</span>
  <span class="tag">&lt;/compiler_options&gt;</span>
...</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>&lt;compiler_options&gt;</code> element contains optional configuration for the compiler (FPC or Delphi):</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;search_paths&gt;</code> define additional locations for the source code (units and include files). These are used to search for units and include files.</p>
<div class="paragraph">
<p>These should be relative paths, like <code>code/</code> or <code>../../some-shared-code</code> (it is OK to point to parent directories).</p>
</div>
<div class="paragraph">
<p>Note that the main project directory (the one where <code>CastleEngineManifest.xml</code> is located) is always searched, regardless of the <code>&lt;search_paths&gt;</code>.</p>
</div>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p><code>&lt;custom_options&gt;</code> are custom compiler options, passed directly to the compiler (FPC or Delphi DCC).</p>
<div class="paragraph">
<p><em>TODO: only supported with FPC for now.</em></p>
</div>
<div class="paragraph">
<p>For example <code>-dMY_CUSTOM_SYMBOL</code> means that the symbol <code>MY_CUSTOM_SYMBOL</code> will be defined (and can be queried in your code using <code>{$ifdef MY_CUSTOM_SYMBOL}</code> ). You can use this also to define some symbols recognized by the engine, e.g. <code>-dCASTLE_PNG_DYNAMIC</code> instructs the engine to use dynamic library to load PNG images (which may be much faster, see <a href="https://github.com/castle-engine/castle-engine/blob/master/src/common_includes/castleconf.inc">castleconf.inc comments</a> ).</p>
</div>
<div class="paragraph">
<p>You can also change FPC "syntax mode" by using option <code>-Mdelphi</code>. The default FPC mode is "ObjFpc", which is not exactly compatible with Delphi, but has some advantages over Delphi.</p>
</div>
<div class="paragraph">
<p>Note that custom option may also be <code>@my-custom-config.cfg</code> in which case FPC reads <code>my-custom-config.cfg</code> file, and you can put more options inside (using features like <code>#IFDEF MSWINDOWS</code> for platform-specific options).</p>
</div>
<div class="paragraph">
<p>The custom compilation options specified here are also placed in auto-generated Lazarus lpi and lpk files. This is used by <code>castle-engine generate-program</code> and <code>castle-engine editor</code> commands of the <a href="Build Tool">Build Tool</a>. The point is that <em>your source code is always compiled with these compilation options</em>.</p>
</div>
</li>
<li>
<p><code>&lt;library_paths&gt;</code> define paths where the linked may found <code>xxx.o</code> files. This is typically used to statically link with Pascal units code compiled from other languages. It corresponds to the FPC <code>-Fl</code> command-line option.</p>
<div class="paragraph">
<p><em>TODO: only supported with FPC for now.</em></p>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_end">12. The end</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="xml">...
<span class="tag">&lt;/project&gt;</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>End of the manifest file.</p>
</div>
</div>
</div>