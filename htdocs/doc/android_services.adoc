# Android Services
include::common.adoc[]

== Introduction

image:https://castle-engine.io/images/thumb_size/android-components-icons.png[float="right",link=http://castle-engine.sourceforge.net/images/original_size/android-components-icons.png,role="screenshot"]

When you use our link:pass:[Build tool][build tool] to package your game for Android, you can easily add _services_ to the project. They allow to comfortably access various Android services (from Google and other 3rd parties, like ad networks) from your Object Pascal game code using the http://castle-engine.sourceforge.net/engine.php[Castle Game Engine].

The Android services are declared in link:pass:[CastleEngineManifest.xml examples][CastleEngineManifest.xml] like this:

[,xml]
----
<android>
  <services>
    <service name="google_play_services" />
    <service name="google_in_app_purchases" />
  </services>
</android>
----

== List of Available Services
** https://github.com/castle-engine/castle-engine/tree/master/tools/build-tool/data/android/integrated-services/admob/README.md[admob]
** <<apps_flyer,apps_flyer>>
** <<chartboost,chartboost>>
** https://github.com/castle-engine/castle-engine/tree/master/tools/build-tool/data/android/integrated-services/client_server/README.md[client_server]
** https://github.com/castle-engine/castle-engine/tree/master/tools/build-tool/data/android/integrated-services/download_urls/README.md[download_urls]
** <<facebook,facebook>>
** <<freetype,freetype>>
** <<game_analytics,game_analytics>>
** <<giftiz,giftiz>>
** <<google_analytics,google_analytics>>
** <<google_in_app_purchases,google_in_app_purchases>>
** <<google_play_games,google_play_games>>
** <<google_play_services,google_play_services>>
** <<helpshift,helpshift>>
** <<heyzap,heyzap>>
** <<sound,sound>>
** <<startapp,startapp>>
** https://github.com/castle-engine/castle-engine/tree/master/tools/build-tool/data/android/integrated-services/tenjin/README.md[tenjin]
** https://github.com/castle-engine/castle-engine/tree/master/tools/build-tool/data/android/integrated-services/test_fairy/README.md[test_fairy]
** <<ogg_vorbis,ogg_vorbis>>
** <<photo_service,photo_service>>
** https://github.com/castle-engine/castle-engine/blob/master/tools/build-tool/data/android/integrated-services/png/README.md[png]
** https://github.com/castle-engine/castle-engine/blob/master/tools/build-tool/data/android/integrated-services/read_external_storage/README.md[read_external_storage]
** <<vibrate,vibrate>>
** https://github.com/castle-engine/castle-engine/blob/master/tools/build-tool/data/android/integrated-services/write_external_storage/README.md[write_external_storage]

== Note on Android project types

Using the `<android>` element, you can request a project type:

* `<android project_type="base">`: No extra integration, the final project does not use any Java code at all. Rendering and inputs work 100%, since they don't require anything extra. This may be enough for some games. However _no services can work_.
* `<android project_type="integrated">`: (*This is the default in CGE >= 6.5.*) We include extra Java integration code that allows to use Android project services that communicate with Object Pascal code. This opens the door for the services mentioned below. It also allows to integrate with various native-code libraries (like FreeType and OpenAL).

Merely declaring the project type as "integrated" (even without any extra services) immediately gives you:

* _Immersive mode_ on newer Android devices. This is a "true" full-screen mode for games on Android, where the back/home buttons are usually hidden.
* You can open URLs in external applications using https://castle-engine.io/apidoc-unstable/html/CastleOpenDocument.html#OpenURL[OpenURL] from https://castle-engine.io/apidoc-unstable/html/CastleOpenDocument.html[CastleOpenDocument] unit. Hint: use special `market://` URL to send users to the _Google Play_ store, e.g. to rate your application.
* You can share text and links with other applications. Use http://castle-engine.sourceforge.net/apidoc/html/CastleOpenDocument.html#ShareText[ShareText] from the http://castle-engine.sourceforge.net/apidoc/html/CastleOpenDocument.html[CastleOpenDocument] unit.
* You can send Android standard on-screen notification ("toast") using http://castle-engine.sourceforge.net/apidoc/html/CastleOpenDocument.html#OnScreenNotification[OnScreenNotification] from the http://castle-engine.sourceforge.net/apidoc/html/CastleOpenDocument.html[CastleOpenDocument] unit.
* Some services (like `sound` and `ogg_vorbis`) will be added automatically to your project if the sound files are detected in your game data. So merely declaring your project type as "integrated" makes sound work on Android.
