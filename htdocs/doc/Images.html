<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_display_images">1. Display images</a></li>
<li><a href="#_parameters_when_loading_image_to_tcastlescene">2. Parameters when loading image to TCastleScene</a></li>
<li><a href="#_image_types_in_cge">3. Image types in CGE</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="_display_images">1. Display images</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are a few ways to display an image using <em>Castle Game Engine</em>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>When the image is part of a 2D user-interface, use <a href="https://castle-engine.io/apidoc-unstable/html/CastleControls.TCastleImageControl.html">TCastleImageControl</a>. Set the <code>TCastleImageControl.URL</code> to load the image.</p>
</li>
<li>
<p>You can load the image to <code>TCastleScene</code>, using the <code>TCastleScene.Load</code> method (or by setting <code>TCastleScene.URL</code>). While traditionally <code>TCastleScene</code> is used for "heavier" 3D and 2D assets, it is perfectly suitable to also just use it to render a trivial rectangle with a simple image. See CGE manual about loading and using scenes: <a href="https://castle-engine.io/manual_load_3d.php">loading, displaying a scene</a>, <a href="https://castle-engine.io/manual_scene.php">transform, animate etc. a scene</a>.</p>
<div class="paragraph">
<p>Under the hood, this method creates nodes to define a rectangle, and applies the image as a texture. The "manual" way of achieving the same is <a href="https://castle-engine.io/x3d_implementation_geometry3d.php#section_example_pascal_rect">presented in the example code here</a>.</p>
</div>
</li>
<li>
<p>The last method is to load the image to <code>TDrawableImage</code>. This is the low-level approach, where you will need to manually handle drawing the image at the appropriate moment, following <a href="https://castle-engine.io/manual_2d_ui_custom_drawn.php">manual about custom-drawing UI things in CGE</a>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The approaches 1 and 2 can be used when designing the game in the <a href="https://castle-engine.io/manual_editor.php">editor</a> and are more advised.</p>
</div>
<div class="paragraph">
<p>All approaches handle all the image formats supported by CGE, like PNG or JPG; see <a href="https://castle-engine.io/castle-view-image.php">castle-view-image</a> docs for the full list.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_parameters_when_loading_image_to_tcastlescene">2. Parameters when loading image to TCastleScene</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default we display an entire image. Alternatively, when loading the image to <code>TCastleScene</code>, you can use a special syntax with URL anchors to specify a subset of the image. That is, instead of</p>
</div>
<div class="listingblock">
<div class="content">
<pre>my_image.png</pre>
</div>
</div>
<div class="paragraph">
<p>you can load</p>
</div>
<div class="listingblock">
<div class="content">
<pre>my_image.png#left:100,bottom:100,width:256,height:256</pre>
</div>
</div>
<div class="paragraph">
<p>This will cut the appropriate subset of the image.</p>
</div>
<div class="paragraph">
<p>These are the parameters:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>left</code></p>
<div class="paragraph">
<p>Left coordinate of chosen rectangle (in image pixels)</p>
</div>
</li>
<li>
<p><code>bottom</code></p>
<div class="paragraph">
<p>Bottom coordinate of chosen rectangle (in image pixels)</p>
</div>
</li>
<li>
<p><code>width</code></p>
<div class="paragraph">
<p>Width of chosen rectangle (in image pixels)</p>
</div>
</li>
<li>
<p><code>height</code></p>
<div class="paragraph">
<p>Height of chosen rectangle (in image pixels)</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>All the parameters are integers (we have not yet found a use-case to make them floats, but please tell us if you have such use-case).</p>
</div>
<div class="paragraph">
<p>Note that if you specify area that is too large (outside of the actual image area), the excessive pixels will show the clamped image border (the image is simply rendered as a texture with repeat=FALSE).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_image_types_in_cge">3. Image types in CGE</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://castle-engine.io/apidoc-unstable/html/CastleImages.TEncodedImage.html">TEncodedImage</a> is an image loaded to a regular memory (RAM) to operate on it by Pascal code (that is, on CPU).</p>
<div class="paragraph">
<p>Important descendant of <code>TEncodedImage</code> is <a href="https://castle-engine.io/apidoc-unstable/html/CastleImages.TCastleImage.html">TCastleImage</a> which is an image that is expressed in memory as directly-accessible array of pixels. It has more descendants for grayscale, RGB, RGBA, float-based images etc. If you want to edit image on CPU, this is what you will use. E.g. create <a href="https://castle-engine.io/apidoc-unstable/html/CastleImages.TRGBAlphaImage.html">TRGBAlphaImage</a> and iterate over <a href="https://castle-engine.io/apidoc-unstable/html/CastleImages.TRGBAlphaImage.html#Pixels">TRGBAlphaImage.Pixels</a>. There are many methods to draw lines, shapes, text to the image.</p>
</div>
<div class="paragraph">
<p>Images are usually 2D, but we also support 3D, for 3D (volumetric) textures.</p>
</div>
</li>
<li>
<p><a href="https://castle-engine.io/apidoc-unstable/html/CastleGLImages.TDrawableImage.html">TDrawableImage</a> holds an image (loaded from <code>TEncodedImage</code>) on GPU. It can be actually rendered on the screen.</p>
<div class="paragraph">
<p>Also, you can edit this image by drawing to it on GPU, see <a href="https://castle-engine.io/apidoc-unstable/html/CastleGLImages.TDrawableImage.html#RenderToImageBegin">TDrawableImage.RenderToImageBegin</a>. Example is in <a href="https://github.com/castle-engine/castle-engine/blob/master/examples/images_videos/draw_images_on_gpu.lpr">examples/images_videos/draw_images_on_gpu.lpr</a>.</p>
</div>
</li>
<li>
<p><a href="https://castle-engine.io/apidoc-unstable/html/CastleGLImages.TCastleImagePersistent.html">TCastleImagePersistent</a> is a container around <code>TCastleImage</code> and <code>TDrawableImage</code>. It is using cache to load images. It is visually configurable in the CGE editor.</p>
<div class="paragraph">
<p>It&#8217;s like a <code>TPicture</code> in VCL&#8201;&#8212;&#8201;it doesn&#8217;t draw the image, but it has everything else to describe <em>how</em> to load and draw the image. It&#8217;s used by <code>TCastleImageControl.Image</code>, <code>TCastleButtom.CustomBackgroundNormal</code>, <code>TCastleButtom.CustomBackgroundPressed</code> etc.</p>
</div>
</li>
<li>
<p><a href="https://castle-engine.io/apidoc-unstable/html/CastleControls.TCastleImageControl.html">TCastleImageControl</a> has a <code>TCastleImagePersistent</code> instance and is a trivial user-interface control to render image on the screen. It can be added and configured in the editor.</p>
</li>
<li>
<p>There are a few <a href="https://castle-engine.io/vrml_x3d.php">X3D nodes</a> to express images. The most important are</p>
<div class="ulist">
<ul>
<li>
<p><a href="https://castle-engine.io/apidoc-unstable/html/X3DNodes.TImageTextureNode.html">TImageTextureNode</a> which is an image loaded from URL (set like <code>MyImageTexture.SetUrl(['castle-data:/my_image.png'])</code>)</p>
</li>
<li>
<p><a href="https://castle-engine.io/apidoc-unstable/html/X3DNodes.TPixelTextureNode.html">TPixelTextureNode</a> which is an image defined by <code>TCastleImage</code> (set like <code>MyPixelTexture.FdImage.Value := MyImage</code>, remember that <code>MyImage</code> becomes "owned" by <code>TPixelTextureNode</code>).</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These nodes are used underneath when you load image into <code>TCastleScene</code>.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>TODO: There are too many classes above. In time, we hope to hide this complexity more, some of these classes ahould become internal (or not necessary at all).</p>
</div>
</div>
</div>